// src/main.tsx (ou là où se trouvent tes routes)
import { BrowserRouter, Routes, Route } from "react-router-dom";
import Home from "@/pages/Home";
import Privacy from "@/pages/Privacy";
import Dashboard from "@/pages/Dashboard";
import Wardrobe from "@/pages/Wardrobe";
import Navbar from "@/components/Navbar";
import CookieBanner from "@/components/CookieBanner";
import { useEffect } from "react";
import { bootstrapConsent } from "@/lib/consent";

function AppShell() {
  useEffect(() => {
    bootstrapConsent(); // applique l’état existant au chargement
  }, []);

  return (
    <>
      <Navbar />
      <CookieBanner />
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/dashboard" element={<Dashboard />} />
        <Route path="/wardrobe" element={<Wardrobe />} />
        <Route path="/privacy" element={<Privacy />} />
      </Routes>
    </>
  );
}

export default function App() {
  return (
    <BrowserRouter>
      <AppShell />
    </BrowserRouter>
  );
}
